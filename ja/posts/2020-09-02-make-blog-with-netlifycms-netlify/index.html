<!doctype html><html lang=ja><head><meta charset=utf-8><title>Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化 - DuiNaru | 開発と経験を載せるブログ</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.74.3"><meta itemprop=name content="Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化"><meta itemprop=description content="静的サイトジェネレータで構築したブログはmarkdown形式のファイルで管理され、投稿の度にビルドとデプロイをしなければなりません。これをしやすくするためにNetlify CMSとNetlifyを入れました。
Netlify CMS Netlify CMSやForestry.ioのように静的サイトジェネレータのcmsは色々あります。
Frontend Interfaces with Hugo
どのサービスでも管理の良さは同じと思いますが、Netlifyと併せて使いやすそうなNetlify CMSを入れました。
特徴 netlify cms - overview
ウェブベース、多くの静的サイトジェネレータのサポートなどの特徴があります。
特にGitベースで管理することがいいと思います。投稿するとcommitされ、投稿完了にpull request、修正で新しくcommitされることですが、プログラミングを似ていますね。投稿の完了するまでbranchを別に作って管理することもできます。
インストール テンプレートから始める netlify cms - Start with a Template
最も早く始める方法です。予めサイトを作成しておく必要がなく、全ての設定が終わっているテンプレートから始めることです。
新しく始めようとする方や早く見てみたいと思う方にお勧めです。
既存のサイトに追加 netlify cms - Add to Your Site
創ってあったブログサイトがある方や初めから設定していきたい方は直接インストールすることもできます。
ファイル作成 管理ページと設定ファイルを作ります。ファイルの格納場所が以下になります。
    These generators &mldr; store static files in     Jekyll, GitBook / (project root)   Hugo, Gatsby, Nuxt, Gridsome, Zola, Sapper /static   Next /public   Hexo, Middleman, Jigsaw /source   Spike /views   Wyam /input   Pelican /content   VuePress /."><meta itemprop=datePublished content="2020-09-02T16:00:24+00:00"><meta itemprop=dateModified content="2020-09-02T16:00:24+00:00"><meta itemprop=wordCount content="468"><meta itemprop=image content><meta itemprop=keywords content="netlify,netlify cms,"><meta property="og:title" content="Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化"><meta property="og:description" content="静的サイトジェネレータで構築したブログはmarkdown形式のファイルで管理され、投稿の度にビルドとデプロイをしなければなりません。これをしやすくするためにNetlify CMSとNetlifyを入れました。
Netlify CMS Netlify CMSやForestry.ioのように静的サイトジェネレータのcmsは色々あります。
Frontend Interfaces with Hugo
どのサービスでも管理の良さは同じと思いますが、Netlifyと併せて使いやすそうなNetlify CMSを入れました。
特徴 netlify cms - overview
ウェブベース、多くの静的サイトジェネレータのサポートなどの特徴があります。
特にGitベースで管理することがいいと思います。投稿するとcommitされ、投稿完了にpull request、修正で新しくcommitされることですが、プログラミングを似ていますね。投稿の完了するまでbranchを別に作って管理することもできます。
インストール テンプレートから始める netlify cms - Start with a Template
最も早く始める方法です。予めサイトを作成しておく必要がなく、全ての設定が終わっているテンプレートから始めることです。
新しく始めようとする方や早く見てみたいと思う方にお勧めです。
既存のサイトに追加 netlify cms - Add to Your Site
創ってあったブログサイトがある方や初めから設定していきたい方は直接インストールすることもできます。
ファイル作成 管理ページと設定ファイルを作ります。ファイルの格納場所が以下になります。
    These generators &mldr; store static files in     Jekyll, GitBook / (project root)   Hugo, Gatsby, Nuxt, Gridsome, Zola, Sapper /static   Next /public   Hexo, Middleman, Jigsaw /source   Spike /views   Wyam /input   Pelican /content   VuePress /."><meta property="og:type" content="article"><meta property="og:url" content="https://duinaru.github.io/ja/posts/2020-09-02-make-blog-with-netlifycms-netlify/"><meta property="og:image" content><meta property="article:published_time" content="2020-09-02T16:00:24+00:00"><meta property="article:modified_time" content="2020-09-02T16:00:24+00:00"><meta property="og:site_name" content="DuiNaru | 開発と経験を載せるブログ"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content><meta name=twitter:title content="Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化"><meta name=twitter:description content="静的サイトジェネレータで構築したブログはmarkdown形式のファイルで管理され、投稿の度にビルドとデプロイをしなければなりません。これをしやすくするためにNetlify CMSとNetlifyを入れました。
Netlify CMS Netlify CMSやForestry.ioのように静的サイトジェネレータのcmsは色々あります。
Frontend Interfaces with Hugo
どのサービスでも管理の良さは同じと思いますが、Netlifyと併せて使いやすそうなNetlify CMSを入れました。
特徴 netlify cms - overview
ウェブベース、多くの静的サイトジェネレータのサポートなどの特徴があります。
特にGitベースで管理することがいいと思います。投稿するとcommitされ、投稿完了にpull request、修正で新しくcommitされることですが、プログラミングを似ていますね。投稿の完了するまでbranchを別に作って管理することもできます。
インストール テンプレートから始める netlify cms - Start with a Template
最も早く始める方法です。予めサイトを作成しておく必要がなく、全ての設定が終わっているテンプレートから始めることです。
新しく始めようとする方や早く見てみたいと思う方にお勧めです。
既存のサイトに追加 netlify cms - Add to Your Site
創ってあったブログサイトがある方や初めから設定していきたい方は直接インストールすることもできます。
ファイル作成 管理ページと設定ファイルを作ります。ファイルの格納場所が以下になります。
    These generators &mldr; store static files in     Jekyll, GitBook / (project root)   Hugo, Gatsby, Nuxt, Gridsome, Zola, Sapper /static   Next /public   Hexo, Middleman, Jigsaw /source   Spike /views   Wyam /input   Pelican /content   VuePress /."><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css><link rel=stylesheet href=/css/bundle.min.307f33cd8015e5bab28d6ebda9b400f8d3059bc248b4e60adf4d23469fab5a2b.css integrity="sha256-MH8zzYAV5bqyjW69qbQA+NMFm8JItOYK300jRp+rWis="><link rel=stylesheet href=/css/add-on.css></head><body><header id=site-header><nav id=site-nav><h1 class=nav-title><a href=/ja/ class=nav>DuiNaru</a></h1><menu id=site-nav-menu class="flyout-menu menu"><a href=/ja/ class="nav link"><i class="fa fa-home"></i>Home</a>
<a href=/ja/categories/ class="nav link"><i class="fa fa-sitemap"></i>Categories</a>
<a href=/ja/tags/ class="nav link"><i class="fa fa-tags"></i>Tags</a>
<a href=#share-menu class="nav link share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
<a href=#search-input class="nav link search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a></menu>
<a href=#search-input class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
<a href=#share-menu class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
<a href=#lang-menu class="nav lang-toggle" lang=ja>ja</a>
<a href=#site-nav class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a></nav><menu id=search class=menu><input id=search-input class="search-input menu"></input><div id=search-results class="search-results menu"></div></menu><menu id=lang-menu class="flyout-menu menu"><a href=# lang=ja class="nav link active">日本語 (ja)</a>
<a href=https://duinaru.github.io/posts/2020-09-02-make-blog-with-netlifycms-netlify/ lang=ko class="nav link">한국어 (ko)</a></menu>
<menu id=share-menu class="flyout-menu menu"><h1>Share Post</h1><a href="//twitter.com/share?text=Netlify%20CMS%20%2b%20Netlify%e3%81%a7%e3%83%96%e3%83%ad%e3%82%b0%e3%82%b5%e3%82%a4%e3%83%88%e7%ae%a1%e7%90%86%e3%81%a8%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%e8%87%aa%e5%8b%95%e5%8c%96&url=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="mailto:?subject=%e3%81%93%e3%81%ae%e6%8a%95%e7%a8%bf%e3%82%92%e3%83%81%e3%82%a7%e3%83%83%e3%82%af%e3%81%99%e3%82%8b %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></menu></header><div id=wrapper><section id=site-intro><a href=/ja/><img src=https://duinaru.github.io/img/main/logo.jpg class=circle width=100 alt="DuiNaru's Blog"></a><header><h1>DuiNaru</h1></header><main><p>ITについての色々な経験を載せます。</p></main></section><main id=site-main><article class=post><header><div class=title><h2><a href=/ja/posts/2020-09-02-make-blog-with-netlifycms-netlify/>Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化</a></h2></div><div class=meta><time datetime="2020-09-02 16:00:24.529 +0000 UTC">2020-09-02</time><p>3 分で読めます</p></div></header><div id=socnet-share><a href="//twitter.com/share?text=Netlify%20CMS%20%2b%20Netlify%e3%81%a7%e3%83%96%e3%83%ad%e3%82%b0%e3%82%b5%e3%82%a4%e3%83%88%e7%ae%a1%e7%90%86%e3%81%a8%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%82%92%e8%87%aa%e5%8b%95%e5%8c%96&url=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank rel=noopener class="nav share-btn twitter"><p>Twitter</p></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank rel=noopener class="nav share-btn facebook"><p>Facebook</p></a><a href="mailto:?subject=%e3%81%93%e3%81%ae%e6%8a%95%e7%a8%bf%e3%82%92%e3%83%81%e3%82%a7%e3%83%83%e3%82%af%e3%81%99%e3%82%8b %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&body=https%3a%2f%2fduinaru.github.io%2fja%2fposts%2f2020-09-02-make-blog-with-netlifycms-netlify%2f" target=_blank class="nav share-btn email" data-proofer-ignore><p>Email</p></a></div><div class=content><a href=/ja/posts/2020-09-02-make-blog-with-netlifycms-netlify/ class=image><img src=https://duinaru.github.io/img/uploads/netlifycms.png alt=netlifycms+netlify></a><p>静的サイトジェネレータで構築したブログはmarkdown形式のファイルで管理され、投稿の度にビルドとデプロイをしなければなりません。これをしやすくするためにNetlify CMSとNetlifyを入れました。</p><h1 id=netlify-cmshttpswwwnetlifycmsorg><a href=https://www.netlifycms.org/>Netlify CMS</a></h1><p>Netlify CMSやForestry.ioのように静的サイトジェネレータのcmsは色々あります。</p><p><a href=https://gohugo.io/tools/frontends/>Frontend Interfaces with Hugo</a></p><p>どのサービスでも管理の良さは同じと思いますが、Netlifyと併せて使いやすそうなNetlify CMSを入れました。</p><h2 id=特徴>特徴</h2><p><a href=https://www.netlifycms.org/docs/intro/>netlify cms - overview</a></p><p>ウェブベース、多くの静的サイトジェネレータのサポートなどの特徴があります。</p><p>特にGitベースで管理することがいいと思います。投稿するとcommitされ、投稿完了にpull request、修正で新しくcommitされることですが、プログラミングを似ていますね。投稿の完了するまでbranchを別に作って管理することもできます。</p><h2 id=インストール>インストール</h2><h3 id=テンプレートから始める>テンプレートから始める</h3><p><a href=https://www.netlifycms.org/docs/start-with-a-template/>netlify cms - Start with a Template</a></p><p>最も早く始める方法です。予めサイトを作成しておく必要がなく、全ての設定が終わっているテンプレートから始めることです。</p><p>新しく始めようとする方や早く見てみたいと思う方にお勧めです。</p><h3 id=既存のサイトに追加>既存のサイトに追加</h3><p><a href=https://www.netlifycms.org/docs/add-to-your-site/>netlify cms - Add to Your Site</a></p><p>創ってあったブログサイトがある方や初めから設定していきたい方は直接インストールすることもできます。</p><h4 id=ファイル作成>ファイル作成</h4><p>管理ページと設定ファイルを作ります。ファイルの格納場所が以下になります。</p><blockquote><table><thead><tr><th>These generators &mldr;</th><th>store static files in</th></tr></thead><tbody><tr><td>Jekyll, GitBook</td><td>/ (project root)</td></tr><tr><td>Hugo, Gatsby, Nuxt, Gridsome, Zola, Sapper</td><td>/static</td></tr><tr><td>Next</td><td>/public</td></tr><tr><td>Hexo, Middleman, Jigsaw</td><td>/source</td></tr><tr><td>Spike</td><td>/views</td></tr><tr><td>Wyam</td><td>/input</td></tr><tr><td>Pelican</td><td>/content</td></tr><tr><td>VuePress</td><td>/.vuepress/public</td></tr><tr><td>Elmstatic</td><td>/_site</td></tr><tr><td>11ty</td><td>/_site</td></tr><tr><td>preact-cli</td><td>/src/static</td></tr></tbody></table><p><a href=https://www.netlifycms.org/docs/add-to-your-site/#app-file-structure>https://www.netlifycms.org/docs/add-to-your-site/#app-file-structure</a></p></blockquote><p>静的サイトジェネレータ別にstaticなウェブページがデプロイされる場所です。hugoで構築したブログですので、staticのフォルダーに格納すればいいです。</p><p>上記のフォルダーにadminというフォルダーを作成し、次の二つのファイルを作成します。</p><blockquote><p>index.html</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!doctype html&gt;</span>
&lt;<span style=color:#f92672>html</span>&gt;
&lt;<span style=color:#f92672>head</span>&gt;
  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span> /&gt;
  &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;viewport&#34;</span> <span style=color:#a6e22e>content</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;width=device-width, initial-scale=1.0&#34;</span> /&gt;
  &lt;<span style=color:#f92672>title</span>&gt;Content Manager&lt;/<span style=color:#f92672>title</span>&gt;
&lt;/<span style=color:#f92672>head</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
  <span style=color:#75715e>&lt;!-- Include the script that builds the page and powers Netlify CMS --&gt;</span>
  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
  &lt;<span style=color:#f92672>script</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://identity.netlify.com/v1/netlify-identity-widget.js&#34;</span>&gt;&lt;/<span style=color:#f92672>script</span>&gt;
  &lt;<span style=color:#f92672>script</span>&gt;
  <span style=color:#66d9ef>if</span> (window.<span style=color:#a6e22e>netlifyIdentity</span>) {
    window.<span style=color:#a6e22e>netlifyIdentity</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;init&#34;</span>, <span style=color:#a6e22e>user</span> =&gt; {
      <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>user</span>) {
        window.<span style=color:#a6e22e>netlifyIdentity</span>.<span style=color:#a6e22e>on</span>(<span style=color:#e6db74>&#34;login&#34;</span>, () =&gt; {
          document.<span style=color:#a6e22e>location</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/admin/&#34;</span>;
        });
      }
    });
  }
&lt;/<span style=color:#f92672>script</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>config.yml</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>backend</span>:
  <span style=color:#66d9ef>name</span>: git-gateway
  <span style=color:#66d9ef>branch</span>: master <span style=color:#75715e># Branch to update (optional; defaults to master)</span>

<span style=color:#75715e># This line should *not* be indented</span>
<span style=color:#66d9ef>publish_mode</span>: editorial_workflow

<span style=color:#75715e># These lines should *not* be indented</span>
<span style=color:#66d9ef>media_folder</span>: <span style=color:#e6db74>&#34;/static/img/uploads&#34;</span> <span style=color:#75715e># Media files will be stored in the repo under static/images/uploads</span>
<span style=color:#66d9ef>public_folder</span>: <span style=color:#e6db74>&#34;/img/uploads&#34;</span> <span style=color:#75715e># The src attribute for uploaded media will begin with /images/uploads</span>

<span style=color:#66d9ef>collections</span>:
  - <span style=color:#66d9ef>name</span>: <span style=color:#e6db74>&#34;blog&#34;</span> <span style=color:#75715e># Used in routes, e.g., /admin/collections/blog</span>
    <span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Blog&#34;</span> <span style=color:#75715e># Used in the UI</span>
    <span style=color:#66d9ef>folder</span>: <span style=color:#e6db74>&#34;_posts/blog&#34;</span> <span style=color:#75715e># The path to the folder where the documents are stored</span>
    <span style=color:#66d9ef>create</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># Allow users to create new documents in this collection</span>
    <span style=color:#66d9ef>slug</span>: <span style=color:#e6db74>&#34;{{year}}-{{month}}-{{day}}-{{slug}}&#34;</span> <span style=color:#75715e># Filename template, e.g., YYYY-MM-DD-title.md</span>
    <span style=color:#66d9ef>fields</span>: <span style=color:#75715e># The fields for each document, usually in front matter</span>
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Layout&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;layout&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;hidden&#34;</span><span style=color:#66d9ef>, default</span>: <span style=color:#e6db74>&#34;blog&#34;</span>}
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Title&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;title&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;string&#34;</span>}
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Publish Date&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;date&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;datetime&#34;</span>}
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Featured Image&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;thumbnail&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;image&#34;</span>}
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Rating (scale of 1-5)&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;rating&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;number&#34;</span>}
      - {<span style=color:#66d9ef>label</span>: <span style=color:#e6db74>&#34;Body&#34;</span><span style=color:#66d9ef>, name</span>: <span style=color:#e6db74>&#34;body&#34;</span><span style=color:#66d9ef>, widget</span>: <span style=color:#e6db74>&#34;markdown&#34;</span>}
</code></pre></div><p><a href=https://www.netlifycms.org/docs/add-to-your-site/#configuration>https://www.netlifycms.org/docs/add-to-your-site/#configuration</a></p></blockquote><p>index.htmlはNetlfiy CMSにアクセスするためのページで、config.ymlは設定ファイルです。</p><p>設定項目は色々ありますので、<a href=https://www.netlifycms.org/docs/add-to-your-site/#configuration>公式ホームページ</a>から確認できます。</p><h4 id=確認>確認</h4><p>netlfiy cmsのページを確認します。</p><p>ローカルから<code>hugo -serve</code>で駆動し、http://localhost:1313/adminにアクセスするとログイン画面が表示されます。</p><p><img src=/img/uploads/netlfiy_cms_login_page.png alt="netlfy cms login page"></p><h4 id=netlifyの設定ファイルの作成>Netlifyの設定ファイルの作成</h4><p>Netlifyにデプロイするための設定ファイルと作成します。ブログサイトのルートにnetlify.tomlのファイルを作成します。該当のファイルにNetlifyの設定ができ、ビルドコマンドや環境変数などを指定することができます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#75715e>#/my-blog/netlify.toml</span>

[<span style=color:#a6e22e>build</span>]
<span style=color:#a6e22e>publish</span> = <span style=color:#e6db74>&#34;public&#34;</span>
<span style=color:#a6e22e>command</span> = <span style=color:#e6db74>&#34;hugo --gc --minify&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>production</span>.<span style=color:#a6e22e>environment</span>]
<span style=color:#a6e22e>HUGO_VERSION</span> = <span style=color:#e6db74>&#34;0.74.3&#34;</span>
<span style=color:#a6e22e>HUGO_ENV</span> = <span style=color:#e6db74>&#34;production&#34;</span>
<span style=color:#a6e22e>HUGO_ENABLEGITINFO</span> = <span style=color:#e6db74>&#34;true&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>split1</span>]
<span style=color:#a6e22e>command</span> = <span style=color:#e6db74>&#34;hugo --gc --minify --enableGitInfo&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>split1</span>.<span style=color:#a6e22e>environment</span>]
<span style=color:#a6e22e>HUGO_VERSION</span> = <span style=color:#e6db74>&#34;0.74.3&#34;</span>
<span style=color:#a6e22e>HUGO_ENV</span> = <span style=color:#e6db74>&#34;production&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>deploy</span><span style=color:#960050;background-color:#1e0010>-</span><span style=color:#a6e22e>preview</span>]
<span style=color:#a6e22e>command</span> = <span style=color:#e6db74>&#34;hugo --gc --minify --buildFuture -b $DEPLOY_PRIME_URL&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>deploy</span><span style=color:#960050;background-color:#1e0010>-</span><span style=color:#a6e22e>preview</span>.<span style=color:#a6e22e>environment</span>]
<span style=color:#a6e22e>HUGO_VERSION</span> = <span style=color:#e6db74>&#34;0.74.3&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>branch</span><span style=color:#960050;background-color:#1e0010>-</span><span style=color:#a6e22e>deploy</span>]
<span style=color:#a6e22e>command</span> = <span style=color:#e6db74>&#34;hugo --gc --minify -b $DEPLOY_PRIME_URL&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>branch</span><span style=color:#960050;background-color:#1e0010>-</span><span style=color:#a6e22e>deploy</span>.<span style=color:#a6e22e>environment</span>]
<span style=color:#a6e22e>HUGO_VERSION</span> = <span style=color:#e6db74>&#34;0.74.3&#34;</span>

[<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>next</span>.<span style=color:#a6e22e>environment</span>]
<span style=color:#a6e22e>HUGO_ENABLEGITINFO</span> = <span style=color:#e6db74>&#34;true&#34;</span>
</code></pre></div><h4 id=repository作成>Repository作成</h4><p>Netlifyは<a href=https://github.com/>GitHub</a>、<a href=https://about.gitlab.com/>GitLab</a>、<a href=https://bitbucket.org/>Bitbucket </a>のRepositoryからデプロイすることができます。今まで創ったブログサイトをRepositoryにPushしましょう。</p><h1 id=netlify>Netlify</h1><h2 id=netlifyデプロイ>Netlifyデプロイ</h2><h3 id=ログイン>﻿ログイン</h3><p>Netlifyにアクセスし、ログインします。</p><p><a href=https://www.netlify.com/>https://www.netlify.com/</a></p><p>New site from Gitのボタンで新規サイトを作成します。初めてアカウントを作成した場合は作成後、新規サイト作成画面が表示される場合もあります。</p><p><img src=/img/uploads/netlify_my_sites.png alt="New site from Git"></p><h3 id=サイト作成>サイト作成</h3><p>ブログRepositoryがあるGitを設定します。</p><p><img src=/img/uploads/netlify_create_site_1.png alt="create a new site"></p><p>GitのボタンをクリックするとRepositoryを選択する画面が表示されますので、ブログサイトのRepositoryを選びます。</p><p><img src=/img/uploads/netlify_create_site_2.png alt="choose repository"></p><p>次はBranchやビルドコマンドを設定します。デフォルトで設定されていますのでこのまま進みましょう。</p><p><img src=/img/uploads/netlify_create_site_3.png alt="deploy site"></p><p>Deploy siteボタンをクリックし、Siteを作成します。</p><h3 id=作成確認>作成確認</h3><p>筆者の場合はHugo Future Imperfect Slimをcloneで入れまして、画像のようにFailedと失敗しました。submoduleで入れた場合は成功すると思います。</p><p><img src=/img/uploads/netlify_create_site_fail.png alt="create site fail"></p><p>Submodule Pathがないというエラーで、.gitmodulesのファイルをブログサイトのルートに作成し、Pushしました。</p><blockquote><p>.gitmodules</p><pre><code>[submodule &quot;hugo-future-imperfect-slim&quot;]
    path = themes/hugo-future-imperfect-slim
    url = https://github.com/pacollins/hugo-future-imperfect-slim.git
</code></pre></blockquote><p>成功すると以下のようにPublishedが確認できます。</p><p><img src=/img/uploads/netlify_create_site_success.png alt="create site success"></p><h2 id=サイト確認>サイト確認</h2><p>画面に表示されたURLにアクセスすればブログサイトが確認できます。</p><p><img src=/img/uploads/hugo-future-imperfect-slim.png alt="main page"></p><h2 id=netlify設定>Netlify設定</h2><p>Netlify CMSの使用のため、Netlifyでログイン関連の設定をします。</p><h3 id=identity>Identity</h3><p>メニューからIdentityをEnableします。この機能を使用することによって、会員登録などの認証機能が使えるようになります。</p><p><img src=/img/uploads/netlify_enable_identity.png alt="enable identity"></p><h3 id=enable-git-gateway>Enable Git Gateway</h3><p>Netlify CMSでGitを処理するためにGit GatewayをEnableします。Settings - Identityで、Services - Git GatewayにあるEnable Git Gatewayのボタンをクリックします。</p><p><img src=/img/uploads/netlify_enable_git_gateway.png alt="enable git gateway"></p><h3 id=招待専用に設定>招待専用に設定</h3><p>Settings - Identity - RegistrationからEditボタンをクリックし、Invite onlyを選びます。この設定で管理者の招待のみでアカウントを登録することになります。</p><p><img src=/img/uploads/netlify_invite_registration.png alt="registration invite only"></p><h3 id=アカウント登録>アカウント登録</h3><p>アカウントを登録します。</p><p>Invite usersをクリックし、e-mailを記入してSendボタンをクリックします。</p><p><img src=/img/uploads/netlify_invite_users.png alt=invite_users></p><p>記入したe-mailに認証メールが届きます。メールのAccept the inviteをクリックするとブログサイトに遷移されます。</p><p>クリックしたURLは以下と似ていますが、adminを入れて修正し、CMSページになるようにします。</p><p>変更前</p><pre><code>https://trusting-curran-e13b73.netlify.app/#invite_token=-W5a_7Eao-GCIMVEpr97Vw
</code></pre><p>変更後</p><pre><code>https://trusting-curran-e13b73.netlify.app/admin#invite_token=-W5a_7Eao-GCIMVEpr97Vw
</code></pre><p>そうしたらパスワードを設定する画面が出ます。</p><p><img src=/img/uploads/netlifycms_signup.png alt="sign up"></p><h1 id=確認-1>確認</h1><p>パスワードを設定した後、自動的にログインされてNetlify CMSのメイン画面が表示されます。</p><p><img src=/img/uploads/netlifycms_main_page.png alt=img></p><p>New Blogで投稿するなどのNetlify CMSの機能を使用できるようになりました。</p><h1 id=感想>感想</h1><p>終わりました。Netlify CMSを設定しておけば、ウェブで直接投稿できて便利です。</p><p>しかし、日本語や韓国語のタイピングがたまに無視されることがあります。英語は問題ないことでCMSが英語に合わせて作られているかもしれません。</p><p>画像アップロードも便利でいいですが、タイピングは工夫の必要がありそうです。</p></div><footer><div class=stats><ul class=categories><li><a class=article-terms-link href=/ja/categories/blog/>blog</a></li></ul><ul class=tags><li><a class=article-terms-link href=/ja/tags/netlify/>netlify</a></li><li><a class=article-terms-link href=/ja/tags/netlify-cms/>netlify cms</a></li></ul></div></footer></article><article class=post><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"duinaru"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article><div class=pagination><a href=/ja/posts/2020-09-11-deloy-github-pages-with-actions/ class="button left"><span>GitHub ActionsでGitHub Pagesにデプロイ</span></a>
<a href=/ja/posts/2020-08-23-blog-with-hugo/ class="button right"><span>Hugoでブログサイトを構築</span></a></div></main><section id=site-sidebar><section id=recent-posts><header><h1>最近の投稿</h1></header><article class=mini-post><a href=/ja/posts/2021-05-17-aws-summit-online-day2/ class=image><img src=https://duinaru.github.io/img/uploads/aws-summit-online-2021.png alt="aws summit online japan"></a><header><h2><a href=/ja/posts/2021-05-17-aws-summit-online-day2/>AWS summit online japan 2021 2日目</a></h2><time class=published datetime="2021-05-17 15:09:39.914 +0000 UTC">2021-05-17</time></header></article><article class=mini-post><a href=/ja/posts/2021-05-16-aws-summit-online-day1/ class=image><img src=https://duinaru.github.io/img/uploads/aws-summit-online-2021.png alt="aws summit online japan"></a><header><h2><a href=/ja/posts/2021-05-16-aws-summit-online-day1/>AWS summit online japan 2021 1日目</a></h2><time class=published datetime="2021-05-16 09:19:12.609 +0000 UTC">2021-05-16</time></header></article><article class=mini-post><a href=/ja/posts/2020-12-11-githubuniverse2020/ class=image><img src=https://duinaru.github.io/img/uploads/github-universe-2020.jpg alt="GitHub Universe 2020"></a><header><h2><a href=/ja/posts/2020-12-11-githubuniverse2020/>GitHub Universe 2020を見てみました。</a></h2><time class=published datetime="2020-12-11 14:48:24.294 +0000 UTC">2020-12-11</time></header></article><article class=mini-post><a href=/ja/posts/2020-09-11-deloy-github-pages-with-actions/ class=image><img src=https://duinaru.github.io/img/uploads/githubactions.png alt="GitHub Actions"></a><header><h2><a href=/ja/posts/2020-09-11-deloy-github-pages-with-actions/>GitHub ActionsでGitHub Pagesにデプロイ</a></h2><time class=published datetime="2020-09-11 13:52:18.336 +0000 UTC">2020-09-11</time></header></article><article class=mini-post><a href=/ja/posts/2020-09-02-make-blog-with-netlifycms-netlify/ class=image><img src=https://duinaru.github.io/img/uploads/netlifycms.png alt=netlifycms+netlify></a><header><h2><a href=/ja/posts/2020-09-02-make-blog-with-netlifycms-netlify/>Netlify CMS + Netlifyでブログサイト管理とデプロイを自動化</a></h2><time class=published datetime="2020-09-02 16:00:24.529 +0000 UTC">2020-09-02</time></header></article><footer><a href=/ja/posts/ class=button>続きを見る</a></footer></section><section id=categories><header><h1><a href=/ja/categories>カテゴリー</a></h1></header><ul><li><a href=/ja/categories/programming/>programming<span class=count>5</span></a><li><a href=/ja/categories/aws/>aws<span class=count>4</span></a><li><a href=/ja/categories/blog/>blog<span class=count>4</span></a><li><a href=/ja/categories/event/>event<span class=count>1</span></a></li></ul></section></section><footer id=site-footer><ul class=socnet-icons><li><a href=//github.com/duinaru/duinaru.github.io target=_blank rel=noopener title=GitHub class="fab fa-github"></a></li><li><a href=mailto:duinaru@gmail.com target=_blank title=Email class="far fa-envelope"></a></li></ul><p class=copyright>© 2021 DuiNaru | 開発と経験を載せるブログ<br>Theme: <a href=https://github.com/pacollins/hugo-future-imperfect-slim target=_blank rel=noopener>Hugo Future Imperfect Slim</a><br>A <a href=https://html5up.net/future-imperfect target=_blank rel=noopener>HTML5 UP port</a> | Powered by <a href=https://gohugo.io/ title=0.74.3 target=_blank rel=noopener>Hugo</a></p></footer><a id=back-to-top href=# class="fas fa-arrow-up fa-2x"></a><script src=/js/highlight.js></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/bundle.min.e8d7df665d6ea5bd5d98711fcf59c4b867eb1ebce468c5a71dccb61d5e671e50.js integrity="sha256-6NffZl1upb1dmHEfz1nEuGfrHrzkaMWnHcy2HV5nHlA="></script><script src=/js/add-on.js></script><script src=https://identity.netlify.com/v1/netlify-identity-widget.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-175500005-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>