<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ssm on DuiNaru | 開発と経験を載せるブログ</title><link>https://duinaru.github.io/ja/tags/ssm/</link><description>Recent content in ssm on DuiNaru | 開発と経験を載せるブログ</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Mon, 18 Nov 2019 11:53:20 +0000</lastBuildDate><atom:link href="https://duinaru.github.io/ja/tags/ssm/index.xml" rel="self" type="application/rss+xml"/><item><title>SSMとCloudWatchでログインする時、EC2が自動起動されるように設定</title><link>https://duinaru.github.io/ja/posts/2019-11-18-auto-start-ec2-on-sign-in/</link><pubDate>Mon, 18 Nov 2019 11:53:20 +0000</pubDate><guid>https://duinaru.github.io/ja/posts/2019-11-18-auto-start-ec2-on-sign-in/</guid><description>Cloud9を手動で作ったEC2で使用していまして、自動で作る時に使用できるEC2の自動起動のようにしたいと思いました。
しかし、Cloud9が始まる時にEC2をスタートさせることはできなくてConsoleにSign inする時、起動されるようにしました。
AWS System Manager EC2を起動させるためにSSMを利用します。
そのため、SSMがEC2を管理できるようにセットアップをしなければなりません。
IAM Role 作成 : AmazonSSMManagedInstanceCore EC2をSSMで使用できるようにIAM Roleを作成します。
AmazonSSMManagedInstanceCoreのpolicyを選択し、作ります。
作ったIAMを自動起動させようとするEC2にattachすればいいです。
Attaching an IAM Role to an Instance
上のリンクのようにすればいいです。
IAM Role 作成 : AmazonSSMAutomationRole 今度はSSMを実行する時に必要なIAM Roleを作成します。
AmazonSSMAutomationRoleのpolicyを選択し、作ります。
このroleは後で使います。
次はログインイベントが発生するとEC2が起動されるように設定します。
CloudTrail 設定 ログインイベントを使用するためにはCloudTrailを設定する必要があります。
CloudTrailの左メニューで Trails - Create Trail を選択しましょう。
作成し、設定を見るとLoggingがONになっていることが確認できます。
CloudTrailの設定が終わりました。
CloudWatchのRules設定 ログインイベントをCloudWatchで感知し、処理されるようにしましょう。
CloudWatchの左メニューで Rules - Creates rule を選択します。
Event Source Service NameはAWS Console Sign-inを選択します。</description></item></channel></rss>